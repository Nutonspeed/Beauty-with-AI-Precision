'use client' import React, { useState } from 'react'
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import { Label } from '@/components/ui/label'
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'
import { Alert, AlertDescription } from '@/components/ui/alert'
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'
import { Eye, EyeOff, Mail, Lock, User, Phone } from 'lucide-react' interface LoginModalProps { isOpen: boolean onClose: () => void onLoginSuccess?: (user: any) => void
} export default function LoginModal({ isOpen, onClose, onLoginSuccess }: LoginModalProps) { const [isLoading, setIsLoading] = useState(false) const [error, setError] = useState('') const [showPassword, setShowPassword] = useState(false) // Login form const [loginData, setLoginData] = useState({ email: '', password: '' }) // Signup form const [signupData, setSignupData] = useState({ name: '', email: '', phone: '', password: '', confirmPassword: '' }) const handleLogin = async (e: React.FormEvent) => { e.preventDefault() setIsLoading(true) setError('') try { // Mock login - replace with actual auth if (loginData.email === 'demo@clinic.com' && loginData.password === 'demo123') { const user = { id: 'demo-user', email: loginData.email, name: 'Demo Clinic', role: 'clinic_owner' } onLoginSuccess?.(user) onClose() } else { setError('อีเมลหรือรหัสผ่านไม่ถูกต้อง') } } catch (err) { setError('เกิดข้อผิดพลาด กรุณาลองใหม่') } finally { setIsLoading(false) } } if (!isOpen) return null return ( <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"> <Card className="w-full max-w-md mx-4"> <CardHeader> <div className="flex justify-between items-center"> <CardTitle>เข้าสู่ระบบ / สมัครสมาชิก</CardTitle> <Button variant="ghost" size="sm" onClick={onClose}> ✕ </Button> </div> </CardHeader> <CardContent> <Tabs defaultValue="login" className="w-full"> <TabsList className="grid w-full grid-cols-2"> <TabsTrigger value="login">เข้าสู่ระบบ</TabsTrigger> <TabsTrigger value="signup">สมัครสมาชิก</TabsTrigger> </TabsList> <TabsContent value="login"> <form onSubmit={handleLogin} className="space-y-4"> {error && ( <Alert variant="destructive"> <AlertDescription>{error}</AlertDescription> </Alert> )} <div className="space-y-2"> <Label htmlFor="email">อีเมล</Label> <div className="relative"> <Mail className="absolute left-3 top-3 h-4 w-4 text-gray-400" /> <Input id="email" type="email" placeholder="demo@clinic.com" value={loginData.email} onChange={(e) => setLoginData({ ...loginData, email: e.target.value })} className="pl-10" required /> </div> </div> <div className="space-y-2"> <Label htmlFor="password">รหัสผ่าน</Label> <div className="relative"> <Lock className="absolute left-3 top-3 h-4 w-4 text-gray-400" /> <Input id="password" type={showPassword ? 'text' : 'password'} placeholder="••••••••" value={loginData.password} onChange={(e) => setLoginData({ ...loginData, password: e.target.value })} className="pl-10 pr-10" required /> <Button type="button" variant="ghost" size="sm" className="absolute right-0 top-0 h-full px-3" onClick={() => setShowPassword(!showPassword)} > {showPassword ? <EyeOff className="h-4 w-4" /> : <Eye className="h-4 w-4" />} </Button> </div> </div> <Button type="submit" className="w-full" disabled={isLoading}> {isLoading ? 'กำลังเข้าสู่ระบบ...' : 'เข้าสู่ระบบ'} </Button> <div className="text-center text-sm"> <Button variant="link" className="text-xs"> ลืมรหัสผ่าน? </Button> </div> </form> </TabsContent> <TabsContent value="signup"> <form onSubmit={handleSignup} className="space-y-4"> {error && ( <Alert variant="destructive"> <AlertDescription>{error}</AlertDescription> </Alert> )} <div className="space-y-2"> <Label htmlFor="name">ชื่อคลินิก</Label> <div className="relative"> <User className="absolute left-3 top-3 h-4 w-4 text-gray-400" /> <Input id="name" type="text" placeholder="ชื่อคลินิกของคุณ" value={signupData.name} onChange={(e) => setSignupData({ ...signupData, name: e.target.value })} className="pl-10" required /> </div> </div> <div className="space-y-2"> <Label htmlFor="signup-email">อีเมล</Label> <div className="relative"> <Mail className="absolute left-3 top-3 h-4 w-4 text-gray-400" /> <Input id="signup-email" type="email" placeholder="clinic@example.com" value={signupData.email} onChange={(e) => setSignupData({ ...signupData, email: e.target.value })} className="pl-10" required /> </div> </div> <div className="space-y-2"> <Label htmlFor="phone">เบอร์โทรศัพท์</Label> <div className="relative"> <Phone className="absolute left-3 top-3 h-4 w-4 text-gray-400" /> <Input id="phone" type="tel" placeholder="08X-XXX-XXXX" value={signupData.phone} onChange={(e) => setSignupData({ ...signupData, phone: e.target.value })} className="pl-10" required /> </div> </div> <div className="space-y-2"> <Label htmlFor="signup-password">รหัสผ่าน</Label> <div className="relative"> <Lock className="absolute left-3 top-3 h-4 w-4 text-gray-400" /> <Input id="signup-password" type={showPassword ? 'text' : 'password'} placeholder="••••••••" value={signupData.password} onChange={(e) => setSignupData({ ...signupData, password: e.target.value })} className="pl-10" required /> </div> </div> <div className="space-y-2"> <Label htmlFor="confirm-password">ยืนยันรหัสผ่าน</Label> <div className="relative"> <Lock className="absolute left-3 top-3 h-4 w-4 text-gray-400" /> <Input id="confirm-password" type={showPassword ? 'text' : 'password'} placeholder="••••••••" value={signupData.confirmPassword} onChange={(e) => setSignupData({ ...signupData, confirmPassword: e.target.value })} className="pl-10" required /> </div> </div> <Button type="submit" className="w-full" disabled={isLoading}> {isLoading ? 'กำลังสมัคร...' : 'สมัครสมาชิก'} </Button> </form> </TabsContent> </Tabs> </CardContent> </Card> </div> )
}