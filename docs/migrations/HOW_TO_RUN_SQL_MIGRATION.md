# üöÄ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏£‡∏±‡∏ô SQL Migration ‡πÉ‡∏ô Supabase

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏õ‡∏¥‡∏î Supabase Dashboard

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà https://supabase.com/dashboard
2. ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ account ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Project: **ai367bar** (‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠ project ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì)

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏õ‡∏¥‡∏î SQL Editor

1. ‡πÉ‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢ ‡∏Ñ‡∏•‡∏¥‡∏Å **"SQL Editor"**
2. ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° **"New Query"** (‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô ‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤‡∏ö‡∏ô)

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: Copy SQL

1. ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå `SUPABASE_MIGRATION_user_preferences.sql` ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ
2. **Copy ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î** (Ctrl+A ‚Üí Ctrl+C)

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: Paste ‡πÅ‡∏•‡∏∞ Run

1. **Paste** SQL ‡∏•‡∏á‡πÉ‡∏ô SQL Editor (Ctrl+V)
2. ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° **"Run"** (‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î **Ctrl+Enter**)
3. ‡∏£‡∏≠ 2-3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 5: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå

### ‚úÖ ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:
‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°:
\`\`\`
Success. No rows returned
\`\`\`

### ‚ùå ‡∏°‡∏µ Error:
- ‡∏ñ‡πâ‡∏≤‡πÄ‡∏´‡πá‡∏ô "already exists" ‚Üí ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£ ‡πÅ‡∏õ‡∏•‡∏ß‡πà‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß
- ‡∏ñ‡πâ‡∏≤ error ‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‚Üí Copy error ‡∏°‡∏≤‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ‡∏ä‡πà‡∏ß‡∏¢‡πÅ‡∏Å‡πâ

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 6: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á

1. ‡πÉ‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏ã‡πâ‡∏≤‡∏¢ ‡∏Ñ‡∏•‡∏¥‡∏Å **"Database"** ‚Üí **"Tables"**
2. ‡∏´‡∏≤ table ‡∏ä‡∏∑‡πà‡∏≠ **"user_preferences"**
3. ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏î‡∏π structure ‡∏ß‡πà‡∏≤‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

### ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ:
- ‚úÖ id (uuid)
- ‚úÖ user_id (uuid)
- ‚úÖ notification_settings (jsonb)
- ‚úÖ language (varchar)
- ‚úÖ theme (varchar)
- ‚úÖ timezone (varchar)
- ‚úÖ date_format (varchar)
- ‚úÖ currency (varchar)
- ‚úÖ created_at (timestamp)
- ‚úÖ updated_at (timestamp)

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 7: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ô‡∏µ‡πâ‡πÉ‡∏ô Terminal:

\`\`\`powershell
npx tsx scripts/setup-user-preferences.ts
\`\`\`

### ‚úÖ ‡∏ñ‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô:
\`\`\`
‚úÖ Table exists!
‚úÖ Insert successful!
‚úÖ Select successful!
üéâ USER_PREFERENCES TABLE SETUP COMPLETE!
\`\`\`

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 8: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ö‡∏ô‡πÄ‡∏ß‡πá‡∏ö

1. ‡∏£‡∏±‡∏ô dev server: `pnpm dev`
2. ‡πÄ‡∏õ‡∏¥‡∏î http://localhost:3000/profile
3. Login ‡∏î‡πâ‡∏ß‡∏¢ test account
4. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö 4 tabs:
   - ‚úÖ Personal Info ‚Üí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
   - ‚úÖ Security ‚Üí ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
   - ‚úÖ Notifications ‚Üí ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î notifications
   - ‚úÖ Preferences ‚Üí ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô theme, language

---

## üìù ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏

- ‡πÑ‡∏ü‡∏•‡πå SQL ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà: `SUPABASE_MIGRATION_user_preferences.sql`
- SQL ‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô PostgreSQL (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà SQL Server)
- VS Code ‡∏≠‡∏≤‡∏à‡πÅ‡∏™‡∏î‡∏á errors ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏ô‡πÉ‡∏à (syntax ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PostgreSQL)
- RLS Policies ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÅ‡∏ï‡πà‡∏•‡∏∞ user ‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á

---

## üÜò ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ 1: Table already exists
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:** ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£ ‡πÅ‡∏õ‡∏•‡∏ß‡πà‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ 2: Policy already exists
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:** ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£ ‡πÅ‡∏õ‡∏•‡∏ß‡πà‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ 3: Insert failed
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:** ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ RLS policies ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á (‡∏î‡∏π‡πÉ‡∏ô Database ‚Üí Tables ‚Üí user_preferences ‚Üí Policies)

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ 4: ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ login ‡πÑ‡∏î‡πâ
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:** ‡πÉ‡∏ä‡πâ test accounts:
- test-owner@beautyclinic.com / Test1234!
- test-sales@beautyclinic.com / Test1234!
- test-customer@beautyclinic.com / Test1234!

---

## ‚úÖ Checklist

- [ ] ‡πÄ‡∏õ‡∏¥‡∏î Supabase Dashboard
- [ ] ‡πÄ‡∏õ‡∏¥‡∏î SQL Editor ‚Üí New Query
- [ ] Copy SQL ‡∏à‡∏≤‡∏Å SUPABASE_MIGRATION_user_preferences.sql
- [ ] Paste ‡πÅ‡∏•‡∏∞ Run
- [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö success message
- [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö table ‡πÉ‡∏ô Database ‚Üí Tables
- [ ] ‡∏£‡∏±‡∏ô `npx tsx scripts/setup-user-preferences.ts`
- [ ] ‡πÄ‡∏´‡πá‡∏ô "üéâ SETUP COMPLETE!"
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ö‡∏ô http://localhost:3000/profile

---

**‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß! üöÄ**
