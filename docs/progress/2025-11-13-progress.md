# รายงานความคืบหน้า (2025-11-13)

โปรเจกต์: ClinicIQ (เดิม Beauty with AI Precision)
อัปเดตโดย: Automation Agent

## สรุปไฮไลต์
- ฉากพื้นหลัง Fluid Simulation แบบ david.li (WebGL) พร้อม autoplay, mouse-follow, HiDPI, ลด motion, รองรับมือถือ (แยกเป็น iframe same-origin ที่ `public/fluid/*` + โค้ดสื่อสาร host ⟷ iframe).
- รีแบรนด์เต็มรูปแบบเป็น “ClinicIQ”: โลโก้/สี/เมตาดาต้า/OG Image/ไอคอน ปรับให้สอดคล้อง, เปลี่ยน token สีธีม, อัปเดต README/อีเมล footer/Docker tag/IndexedDB name.
- ปรับ Landing ให้ “มืออาชีพ” (Phase A): โครง IA ใหม่ (Hero + Proof + Value + How-it-works + Compliance Teaser + Case Study Teaser), ตัด testimonial placeholder, จำกัดโลโก้พาร์ทเนอร์ ≤ 6 (ยังว่างไว้รออนุมัติจริง).
- ระบบ Analytics: โมดูล `lib/analytics/usage-tracker.ts` + API `app/api/analytics/events` + batch/ลดสแปม event, มี event มาตรฐาน (page_view, engagement, performance, error). เพิ่ม RLS สำหรับตาราง analytics (`supabase/migrations/20251112_analytics_events_rls.sql`).
- เนื้อหา Phase B (แกนหลัก):
  - `/case-studies` (ลิสต์แบบ localize) + หน้า `/case-studies/[slug]` (รายละเอียด เคสตัวอย่างพร้อม metrics/sections).
  - `/compliance` เพิ่ม Metrics Widget (IntersectionObserver) แสดง Sensitivity/Specificity/Accuracy พร้อม event วัดการมองเห็น.

## ไฟล์/โฟลเดอร์ใหม่ที่สำคัญ
- Content & Pages: `app/[locale]/case-studies/*`, `app/[locale]/compliance/page.tsx`
- Data: `data/case-studies.ts`, `data/trust.ts`
- Analytics: `lib/analytics/usage-tracker.ts`, `app/api/analytics/events/*`, สคริปต์ทดสอบ `test-analytics-api.mjs`
- Branding/Assets: `components/brand/*`, `public/logos/*`, `public/og-cliniciq.svg`, `public/favicon.svg`
- Fluid: `components/fluid-*.tsx`, `public/fluid/*` (shaders, scripts)
- Docs: `docs/landing-professionalization-plan.md`, (ไฟล์นี้) `docs/progress/2025-11-13-progress.md`

## เช็คลิสต์สถานะ (วันนี้)
- [x] Fluid background + ลด motion / HiDPI / mobile
- [x] รีแบรนด์ ClinicIQ (โลโก้/ธีม/เมตาดาต้า/OG)
- [x] Landing Phase A + Analytics (hero CTA/time-in-view/scroll depth)
- [x] เพิ่ม `/case-studies` (ลิสต์ + รายละเอียดแบบ localize)
- [x] เพิ่ม `/compliance` + Metrics Widget + engagement event
- [x] เพิ่ม RLS/เส้นทาง API analytics + unit tests สำหรับ usage tracking
- [ ] โลโก้พาร์ทเนอร์จริง (≤ 6) — รออนุมัติ/ไฟล์จริง
- [ ] เติมเคสศึกษาเพิ่มเติม (ภาพ/กราฟ) — รอคอนเทนต์จริง
- [ ] แก้เทสประสิทธิภาพที่ flake (ดูรายละเอียดด้านล่าง)

## คุณภาพโค้ด (Quality Gates)
- Build: ไม่รันในรอบนี้ (Next.js build ขนาดใหญ่) — จะรันบน Vercel CI
- Typecheck: PASS (`pnpm type-check`)
- Lint: PASS (มี warning จำนวนมาก แต่ไม่มี error บล็อกงาน)
- Tests: FAIL (1 รายการ) — `__tests__/performance-benchmark.test.ts` กรณี “mobile optimization” เกิน threshold เล็กน้อย (มิใช่ฟีเจอร์ที่เพิ่งแก้)

ข้อเสนอแนะแก้ไขเทส (ไม่บล็อก deploy):
- ปรับ threshold ให้ยืดหยุ่นขึ้นบน Windows/CI หรือ mark test เป็น flaky ด้วย timeout เฉพาะ platform
- แยกสภาพแวดล้อม GPU/WebGL vs CPU-only เพื่อลด variance เวลา

## การดีพลอย
- วิธีการ: เมื่อ push ขึ้นสาขา `main` ระบบ Vercel จะ build/deploy อัตโนมัติ (มี `vercel.json` ในรีโป้)
- หมายเหตุ: ถ้าระบบยังไม่เชื่อม Git ↔ Vercel ให้เข้าแดชบอร์ด Vercel เลือก Import จาก GitHub repo แล้วเปิด Auto Deploy for main

## งานถัดไปแนะนำ (Next Steps)
1) ใส่โลโก้พาร์ทเนอร์จริง (≤ 6) หลังได้รับอนุญาต
2) เพิ่มเคสศึกษา (TH/EN) พร้อมภาพ/กราฟ — วัด engagement เพิ่มเติม (เช่น image expand/download)
3) ปรับเทส performance ให้เสถียรใน CI
4) ตรวจ dev server ที่ล้มในเครื่องบางครั้ง (อาจมาจาก next@16 + env) — พิจารณาใช้ `next dev --webpack` ชั่วคราว

---
อ้างอิงไฟล์: `PROJECT_STATUS.md`, `docs/landing-professionalization-plan.md`
